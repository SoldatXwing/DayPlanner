@inherits LayoutComponentBase
<RadzenComponents @rendermode="InteractiveAuto" />
<RadzenLayout>
    <RadzenHeader>
        <Microsoft.AspNetCore.Components.Authorization.AuthorizeView>
            <Authorized>
                <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.SpaceBetween" Style="width:100%;">
                    <!-- Linke Gruppe: Menu und DayPlanner -->
                    <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0">
                        <RadzenSidebarToggle Click="@(() => sidebar1Expanded = !sidebar1Expanded)" />
                        <RadzenLabel Text="DayPlanner" Style="margin-left: 10px;" />
                    </RadzenStack>

                    <!-- Rechte Gruppe: Avatar, Benutzername, Logout und Toggler -->
                    <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="10px">
                        <div style="width:40px; height:40px; border-radius:50%; background-color:var(--rz-secondary, #007bff); color:var(--rz-primary-contrast, white); display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:16px;">
                            @GetUserAvatar()
                        </div>
                        <RadzenLabel Text="@_user?.DisplayName" Style="margin: 0 10px;" />
                        <RadzenButton Click="@(() => Navigation.NavigateToLogout())"
                                      Icon="logout"
                                      ButtonStyle="ButtonStyle.Light"
                                      MouseEnter="@(args => ShowTooltip(args, new TooltipOptions(){ Position = TooltipPosition.Top }))" />
                        <RadzenAppearanceToggle />
                    </RadzenStack>
                </RadzenStack>
            </Authorized>
            <NotAuthorized>
                <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.SpaceBetween" Style="width:100%;">
                    <!-- Linke Gruppe: Menu und DayPlanner -->
                    <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0">
                        <div style="width:40px; height:40px;"></div>
                        <RadzenLabel Text="DayPlanner" Style="margin-left: 10px;" />
                    </RadzenStack>
                    <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="10px">                     
                        <RadzenAppearanceToggle class="mt-1"/>
                    </RadzenStack>
                </RadzenStack>
            </NotAuthorized>
           
        </Microsoft.AspNetCore.Components.Authorization.AuthorizeView>
    </RadzenHeader>

    <Microsoft.AspNetCore.Components.Authorization.AuthorizeView>
        <RadzenSidebar @bind-Expanded="@sidebar1Expanded">
            <RadzenPanelMenu>
                <RadzenPanelMenuItem Text="Home" Icon="home" />
                <RadzenPanelMenuItem Text="Users" Icon="account_box" />
            </RadzenPanelMenu>
            <div class="rz-p-4">
            </div>
        </RadzenSidebar>
    </Microsoft.AspNetCore.Components.Authorization.AuthorizeView>

    <RadzenBody>
        <ChildContent>
            <RadzenContentContainer Name="main">
                @Body
            </RadzenContentContainer>
        </ChildContent>
    </RadzenBody>
    <RadzenFooter Style="background-color: #2c3e50; color: white; border-bottom: 2px solid #3498db; padding: 0;">
        <RadzenRow Style="padding-top: 0.5rem;">
        </RadzenRow>

        <div style="background-color: #34495e; padding: 1rem;">
            <RadzenRow>
                <RadzenColumn Size="6">
                    <div class="rz-text-xs" style="color: #bdc3c7;">
                        © @DateTime.Now.Year DayPlanner GmbH
                    </div>
                </RadzenColumn>
            </RadzenRow>
        </div>
    </RadzenFooter>

</RadzenLayout>

@* <div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">🗙</span>
</div>
 *@